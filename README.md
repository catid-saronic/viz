# Rust WASM Visualizer

This repo serves a collection of animated visualizations rendered with
Rust ➜ WebAssembly ➜ WebGL. `cargo run` builds the WASM bundle, launches
a local HTTP server (port **8000**) and optionally exposes it via **ngrok**
so you can share the page over the internet.

---

## Prerequisites (install once)

1. **Rustup** – the official tool-chain manager

   ```bash
   curl https://sh.rustup.rs -sSf | sh -s -- -y
   . "$HOME/.cargo/env"   # load cargo into PATH for current shell
   ```

2. **wasm32 target** for the Rust compiler

   ```bash
   rustup target add wasm32-unknown-unknown
   ```

3. **wasm-pack** – builds the Rust crate into a WebAssembly package

   ```bash
   cargo install wasm-pack --locked
   ```

4. **Python 3** (used for the tiny local HTTP server).

5. *(Optional)* **ngrok** for public tunnelling.

   ```bash
   # download from https://ngrok.com/download
   sudo mv ngrok /usr/local/bin/
   ngrok config add-authtoken <your_token>
   ```

---

## Usage

```bash
# build + serve + tunnel (if ngrok installed)
cargo run

# just build the WASM bundle (release)
cargo build --target wasm32-unknown-unknown --release

# run browser-based tests (needs Chrome/Firefox on PATH)
wasm-pack test --headless --chrome
```

Open <http://localhost:8000> or the ngrok URL printed in the terminal.

---

## Project layout

```
.
├─ static/            # purely static assets (index.html, shaders, …)
│   └── pkg/          # generated by wasm-pack, auto-served
├─ src/               # Rust source (render, scenes, …)
└─ build.rs           # copies static/ to dist/ when building for WASM
```

---

## Troubleshooting

* **`wasm-pack not found`** – run `cargo install wasm-pack --locked`.
* **`error: target wasm32-unknown-unknown not found`** –
  `rustup target add wasm32-unknown-unknown`.
* Blank page in browser – open dev-console; 404s for `pkg/viz_wasm.js`
  usually mean the WASM bundle failed to build → check the terminal logs.

---

### Why manual setup?

Early iterations auto-installed Rustup, wasm-pack and the target, but this
proved fragile and obscured errors. The program now exits with a clear
message if prerequisites are missing; the steps above document how to set
them up explicitly.

